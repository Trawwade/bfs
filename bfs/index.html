<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signuo</title>
</head>
<body>
    <form action="">
        <input type="text" id="username">
        <input type="password" name="" id="password">
        <select name="" id="">
            <option value="eng">Eng</option>
            <option value="tailor"> tailor</option>
            <option value="plumber"> plumber</option>
            <option value="hairdresser">hair dresser</option>
         </select>

         <input type="submit" value="signup">

    </form>
    <a href="./signin.html">sign in</a>
    <script>
        "use strict"
        let fo = document.querySelector("form")
        fo.onsubmit = signUser
        function signUser(e){
            e.preventDefault()
            let userName = document.querySelector("#username").value
            let skill = document.querySelector("select").value
            let password = document.querySelector("#password").value
            // alert(skill)
            if( userName.length<2){
                alert("invalid username")
                return
                // return breaks the function ie stops the nextinstructions from running

            }

            // usees the above data usernam and skill
            addUser(userName,skill,password)

            
        }
        function addUser(userName,skill,password){
            if (!localStorage.getItem("users")){
                localStorage.setItem("users",JSON.stringify({}))

            }
            // get users from ls
            let users = JSON.parse(localStorage.getItem("users"))


        
        if(users.hasOwnProperty(userName)){
            alert("username already in use")
            return false
        }
        // create user in users object
        users[userName]={
password:password, skill:skill, friends:[]            
        }
        localStorage.setItem("users",JSON.stringify(users))
       alert(`${userName} your account has been succesfully created`)
        // redirect user to sign in page ///basically the a tag in javascript
    window.location.href="./signin.html"
    }
   

    </script>
    
</body>
</html>